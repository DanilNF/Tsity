<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/css/index.css">
    <link rel="shortcut icon" href="./assets/images/plus.svg" type="image/png">
    <title>Document</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="body">
    <div class="Registration--background">
        <b class="title">Welcome</b>
                <!-- <form action="lk.html" onclick="push(event)" > -->
    <div class="btn">
        <ul >
           <button class="auth">
            authorization
           </button>
         </ul>
         <button class="reg">
            registration
         </button> 
           <!-- <ul class="sign"> 
                <li id="sign--up"><a class="btn">Sign up </a></li> 
           </ul> -->
            
        
    </div>
    <div class="sign" id="box1">
<form action="/" method="POST" onclick="push(event)" >
    <div class="form-group">
        <label for="name">Имя:</label>
        <input class="form-control" name="name" />
    </div>

    <div class="form-group">
        <label for="password">Пароль:</label>
        <input class="form-control" name="password" />
    </div>

    </form>
        
            <div class="button">
                <input type="submit" value="sign in"  > <a href="#" onclick="push(event)"></a>
            </div>
    </div>    





    <div class="sign" id="box2">
    <form action="/register" method="POST" onclick="push(event)" >

            
        <div class="form-group">
            <label for="name">Имя:</label>
            <input class="form-control" name="name" />
        </div>
    
        <div class="form-group">
            <label for="password">Пароль:</label>
            <input class="form-control" name="password" />
        </div>

        <div class="form-group">
            <label for="email">email:</label>
            <input class="form-control" name="email" />
        </div>
        <div class="panel-body">
            <button type="submit" class="btn btn-sm btn-primary">Регистрация</button>
           
        </div>

        </form>
        <!-- <form action="lk.html">
            <div class="button">
                <input type="submit" value="Register"  > <a href="#" onclick="push(event)"></a>
            </div>
        </form>   -->

    </div>
    

       
<!-- </form> -->
    </div>

     


<script>
   

   
    var abtn = document.querySelector('.auth');
    var btn = document.querySelector('.reg');
    var auth = document.querySelector('#box1');
    var reg = document.querySelector('#box2');

    abtn.addEventListener("click", function(){
        if(auth.style.display=='none'){
            auth.style.display= 'block';
            reg.style.display='none'
        }
        else{
            auth.style.display='none';
        }
    });
    btn.addEventListener("click",function(){
        if(reg.style.display=='none'){
            reg.style.display='block';
            auth.style.display= 'none';
        }
        else{
            reg.style.display='none';
        }
    });




//     function openbox(id) {
//   var all = document.querySelectorAll(".sign");
//   for (var i = 0; i < all.length; i++) {
//     if (all[i].id == id) {
//       all[i].style.display = (all[i].style.display == 'none')? 'block' : 'none';
//     } else {
//       all[i].style.display = 'none';
//     }
//     console.log("lps");
//   }
// }


async function CreateUser(userName, userPassword, userEmail){
  
  const response = await fetch("api/users", {
      method: "POST",
      headers: { "Accept": "application/json", "Content-Type": "application/json" },
      body: JSON.stringify({
          name: userName,
          password: userPassword,
          email: userEmail
      })
  });
  if (response.ok === true) {
      const user = await response.json();
      reset();
      document.querySelector("tbody").append(row(user));
  }
  
};
document.forms["userForm"].addEventListener("submit", e => {
            e.preventDefault();
            const form = document.forms["userForm"];
            const id = form.elements["id"].value;
            const name = form.elements["name"].value;
            const password = form.elements["password"].value;
            const email = form.elements["email"].value;
            if (id == 0)
                CreateUser(name, password, email);
            else
                EditUser(id, name, password, email);
        });

</script>



</body>
</html>
